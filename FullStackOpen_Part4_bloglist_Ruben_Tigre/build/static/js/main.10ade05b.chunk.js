(this.webpackJsonpbloglist_frontend=this.webpackJsonpbloglist_frontend||[]).push([[0],{25:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(19),i=n.n(c),s=(n(25),n(2)),u=n.n(s),o=n(3),l=n(4),b=n(20),j=n(8),d=n(0),p=a.a.forwardRef((function(e,t){var n=Object(r.useState)(!0),a=Object(l.a)(n,2),c=a[0],i=a[1],s=function(){i(!c)};return Object(r.useImperativeHandle)(t,(function(){return{toggVisibility:s}})),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{style:{display:c?"inline":"none"},className:"initialdiv",children:Object(d.jsx)("button",{onClick:function(){return i(!c)},children:e.label})}),Object(d.jsxs)("div",{style:{display:c?"none":"inline"},className:"toggleddiv",children:[Object(d.jsx)("button",{onClick:function(){return i(!c)},children:"close"}),e.children]})]})}));p.displayName="Toggable";var f=p,h=function(e){return Object(d.jsxs)("div",{className:"Blog_Container",style:{border:"1px black solid",width:"30vw",padding:"0.2vw",marginBottom:"0.4vw"},children:["Title: ",e.title,Object(d.jsx)("br",{}),"Author: ",e.author,Object(d.jsxs)(f,{label:"more",children:[Object(d.jsxs)("p",{style:{margin:"0",marginBlockStart:"0"},children:[Object(d.jsx)("br",{}),"url: ",e.url,Object(d.jsx)("br",{}),"likes: ",e.likes,Object(d.jsx)("br",{})]}),Object(d.jsx)("button",{onClick:e.handleVote,children:"vote"}),Object(d.jsx)("button",{onClick:e.handleDelete,children:"delete"})]})]})},O=function(){return Object(d.jsxs)("svg",{width:"51px",height:"50px",viewBox:"0 0 51 50",children:[Object(d.jsxs)("rect",{y:"0",width:"13",height:"50",fill:"#1fa2ff",children:[Object(d.jsx)("animate",{attributeName:"height",values:"50;10;50",begin:"0s",dur:"1s",repeatCount:"indefinite"}),Object(d.jsx)("animate",{attributeName:"y",values:"0;20;0",begin:"0s",dur:"1s",repeatCount:"indefinite"})]}),Object(d.jsxs)("rect",{x:"19",y:"0",width:"13",height:"50",fill:"#12d8fa",children:[Object(d.jsx)("animate",{attributeName:"height",values:"50;10;50",begin:"0.2s",dur:"1s",repeatCount:"indefinite"}),Object(d.jsx)("animate",{attributeName:"y",values:"0;20;0",begin:"0.2s",dur:"1s",repeatCount:"indefinite"})]}),Object(d.jsxs)("rect",{x:"38",y:"0",width:"13",height:"50",fill:"#06ffcb",children:[Object(d.jsx)("animate",{attributeName:"height",values:"50;10;50",begin:"0.4s",dur:"1s",repeatCount:"indefinite"}),Object(d.jsx)("animate",{attributeName:"y",values:"0;20;0",begin:"0.4s",dur:"1s",repeatCount:"indefinite"})]})]})},x=n(6),g=n.n(x),m="/api/blogs",v=null,w=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(m);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("".concat(m,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y={getAllBlogs:w,setToken:function(e){v="bearer ".concat(e)},createBlog:function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,g.a.post(m,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateBlog:function(){var e=Object(o.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:v}},e.next=3,g.a.put("".concat(m,"/").concat(t),n,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getThatBlog:k,deleteBlog:function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,g.a.delete("".concat(m,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),i=Object(l.a)(c,2),s=i[0],p=i[1];Object(r.useEffect)((function(){f()}),[]);var f=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.getAllBlogs();case 3:(t=e.sent).sort((function(e,t){return t.likes-e.likes})),a(t),p(!0),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),p(!1),a([]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(u.a.mark((function e(t){var r,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getThatBlog(t);case 2:if(!(r=e.sent)){e.next=12;break}return c=Object(j.a)(Object(j.a)({},r),{},{likes:r.likes+1}),e.next=7,y.updateBlog(t,c);case 7:i=n.findIndex((function(e){return e.id===t})),(s=Object(b.a)(n))[i]=Object(j.a)(Object(j.a)({},s[i]),{},{likes:c.likes}),s.sort((function(e,t){return t.likes-e.likes})),a(s);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(u.a.mark((function e(t){var r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.find((function(e){return e.id===t})),c=window.confirm("Remove blog: ".concat(r.title)),!r){e.next=7;break}if(!c){e.next=7;break}return e.next=6,y.deleteBlog(t);case 6:a(n.filter((function(e){return e.id!==t})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"blog_container",children:s?Object(d.jsx)("div",{children:n.map((function(e){return Object(d.jsx)(h,{title:e.title,author:e.author,url:e.url,likes:e.likes,user:e.user.username,handleVote:function(){x(e.id)},handleDelete:function(){g(e.id)}},e.id)}))}):Object(d.jsx)(O,{})})},B={passLogin:function(){var e=Object(o.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(e){var t=e.noti;return!1===t.display?null:Object(d.jsx)("div",{className:"Notification-block",style:{borderRadius:"0.5em",border:"solid 2px ".concat(t.error?"red":"green"),backgroundColor:"".concat(t.error?"#FD8181":"lightgreen"),display:"block",width:"300px",alignItems:"center"},children:Object(d.jsx)("p",{className:"Notification-text",style:{color:t.error?"red":"green",fontWeight:300,textAlign:"center"},children:t.msj})})},N=function(e){return Object(d.jsxs)("form",{onSubmit:e.handleSubmit,children:["username: ",Object(d.jsx)("input",{type:"text",onChange:e.handleChange,value:e.username,name:"username"}),Object(d.jsx)("br",{}),"password: ",Object(d.jsx)("input",{type:"password",onChange:e.handleChange,value:e.password,name:"password"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"submit"})]})},D=function(e){var t=e.addBlog,n=Object(r.useState)(""),a=Object(l.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)(""),b=Object(l.a)(s,2),j=b[0],p=b[1],f=Object(r.useState)(""),h=Object(l.a)(f,2),O=h[0],x=h[1],g=Object(r.useState)({msj:"Default msg",display:!1,error:!1}),m=Object(l.a)(g,2),v=m[0],w=m[1],k=function(){var e=Object(o.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault();try{t({title:c,author:j,url:O}),y("Blog added succesful",!1),i(""),p(""),x("")}catch(r){y("Error while adding blog",!0)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e,t){w({msj:e,display:!0,error:t}),setTimeout((function(){w({msj:"Default msg",display:!1,error:!1})}),3e3)};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(C,{noti:v}),Object(d.jsxs)("form",{onSubmit:k,id:"form",children:["Title: ",Object(d.jsx)("input",{type:"text",onChange:function(e){return i(e.target.value)},value:c,id:"title-input",name:"title",placeholder:"title"}),Object(d.jsx)("br",{}),"Author: ",Object(d.jsx)("input",{type:"text",onChange:function(e){return p(e.target.value)},value:j,id:"author-input",name:"author",placeholder:"author"}),Object(d.jsx)("br",{}),"Url: ",Object(d.jsx)("input",{type:"text",onChange:function(e){return x(e.target.value)},value:O,id:"url-input",name:"url",placeholder:"url"}),Object(d.jsx)("br",{}),Object(d.jsx)("input",{type:"submit",id:"submit"})]})]})};var T=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({}),i=Object(l.a)(c,2),s=i[0],b=i[1],j=Object(r.useState)(""),p=Object(l.a)(j,2),h=p[0],O=p[1],x=Object(r.useState)(""),g=Object(l.a)(x,2),m=g[0],v=g[1],w=Object(r.useRef)(),k=Object(r.useState)({msj:"Default msg",display:!1,error:!1}),T=Object(l.a)(k,2),A=T[0],I=T[1];Object(r.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogappUser");if(e){var t=JSON.parse(e);y.setToken(t.token),a(t.token),b(t)}}),[]);var E=function(){var e=Object(o.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={username:h,password:m},e.prev=2,e.next=5,B.passLogin(n);case 5:r=e.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(r)),a(r.token),b(r),O(""),v(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),J("Wrong username or password",!0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),J=function(e,t){I({msj:e,display:!0,error:t}),setTimeout((function(){I({msj:"Default msg",display:!1,error:!1})}),3e3)},R=function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.createBlog({title:t.title,author:t.author,url:t.url});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===n?Object(d.jsxs)("div",{className:"form-container",children:[Object(d.jsx)(C,{noti:A}),Object(d.jsx)(N,{handleSubmit:E,handleChange:function(e){"username"===e.target.name?O(e.target.value):v(e.target.value)},username:h,password:m})]}):Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"user-data",children:[Object(d.jsx)(C,{noti:A}),s.name," is connected ",Object(d.jsx)("br",{}),Object(d.jsx)("button",{onClick:function(e){e.preventDefault(),window.localStorage.removeItem("loggedBlogappUser"),a(null)},children:"Log out"}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)(f,{label:"New Note",ref:w,children:Object(d.jsx)(D,{addBlog:R})})]}),Object(d.jsx)("br",{}),Object(d.jsx)(S,{})]})};i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(T,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.10ade05b.chunk.js.map